(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{59:function(e,t,n){e.exports=n(92)},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(39),i=n.n(o),u=n(13),s=n(57),l=n(7),p=n(50),m=n.n(p),h=n(26),d=n(51),v=n(12),f=n(8),b=n(25),E=n(33),g=n(52),O=n(53),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return"https://image.tmdb.org/t/p/w".concat(e)},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object(O.a)({},e,{backdrop_path:e.backdrop_path?"".concat(j(1280)).concat(e.backdrop_path):null,poster_path:e.poster_path?"".concat(j(t)).concat(e.poster_path):null})},y=function(e,t){var n=e.results;return n?n.map(function(e){return _(e,t)}):null},S=n(35),I=v.default.fromJS({}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOP_MOVIES_API_SUCCESS":return e.merge(t.data);default:return e}},w=v.default.fromJS({}),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIE_DETAILS_API_SUCCESS":return e.merge(t.data);default:return e}},M=Object(S.combineReducers)({topRated:k,currentMovie:C}),T=Object(S.combineReducers)({movies:M,loadingBar:b.loadingBarReducer,routing:E.routeReducer}),A=Object(g.createLogger)({stateTransformer:function(e){return v.default.Iterable.isIterable(e)?e.toJS():e},collapsed:!0}),N=Object(f.a)(),P=Object(E.routerMiddleware)(N),R=n(14),x=n(15),L=n(17),U=n(16),D=n(18),V=function(e){function t(){return Object(R.a)(this,t),Object(L.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return this.props.children}}]),t}(r.Component),J=n(94),B=n(95),F=n(4),G=n.n(F),Q=n(19),q=function(e,t){var n="".concat("https://api.themoviedb.org/3").concat(e,"?api_key=").concat("6ed12e064b90ae1290fa326ce9e790ff","&language=en-US");return t&&Object.keys(t).forEach(function(e){return n+="&".concat(e,"=").concat(t[e])}),n},H={getTopMovies:function(){var e=Object(Q.a)(G.a.mark(function e(t){var n,a;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=q("/discover/movie",{page:n,sort_by:"popularity.desc"}),e.abrupt("return",fetch(a));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),searchMovies:function(){var e=Object(Q.a)(G.a.mark(function e(t){var n,a,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=t.query,r=q("/search/movie",{page:n,query:a}),e.abrupt("return",fetch(r));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getMovieDetails:function(){var e=Object(Q.a)(G.a.mark(function e(t){var n,a;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,a=q("/movie/".concat(n)),e.abrupt("return",fetch(a));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Y=function(e){return{type:"GET_TOP_MOVIES_API_FAILURE",error:e}},W=n(9),z=n.n(W),K=n(36),X=n.n(K),Z=n(30),$=n.n(Z),ee=n(34),te=n(5),ne=n.n(te),ae=function(e){function t(){return Object(R.a)(this,t),Object(L.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"handleClick",value:function(e){this.props.history.push("/movie/".concat(e))}},{key:"render",value:function(){var e=this.props.movie,t=new Date(e.release_date),n=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear(),a=Math.round(10*parseFloat(e.vote_average)),r="";return a<=50&&(r="red"),a>50&&a<=80&&(r="purple"),c.a.createElement(z.a,{className:"transition-item",onClick:this.handleClick.bind(this,e.id)},c.a.createElement(z.a.Body,null,c.a.createElement("img",{className:"thumbnail",alt:"movie poster",src:e.poster_path}),c.a.createElement(z.a.Title,null,e.title),c.a.createElement(z.a.Text,null,n),c.a.createElement("div",{className:ne()("popular-badge",Object(ee.a)({},"".concat("popular-badge","--").concat(r),""!==r))},a,"%")))}}]),t}(r.Component),re=Object(l.e)(ae),ce=function(e){var t=e.movies,n=t?t.map(function(e){return c.a.createElement($.a,{className:"movie",key:e.id,xs:6,sm:4,md:3,lg:3},c.a.createElement(re,{movie:e}))}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a.Title,{className:"category"},"Popular Movies"),c.a.createElement(X.a,{className:"movie-list"},n))},oe=n(24),ie=n(58),ue=function(e){return{type:"SEARCH_MOVIE_API_FAILURE",error:e}},se=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(L.a)(this,Object(U.a)(t).call(this,e))).state={movies:[]},n.inputOnChange=n.inputOnChange.bind(Object(oe.a)(Object(oe.a)(n))),n.downshiftOnChange=n.downshiftOnChange.bind(Object(oe.a)(Object(oe.a)(n))),n}return Object(D.a)(t,e),Object(x.a)(t,[{key:"inputOnChange",value:function(e){var t=this;e.target.value&&this.props.searchMovie({query:e.target.value}).then(function(e){var n=y(e.data,92);t.setState({movies:n})})}},{key:"downshiftOnChange",value:function(e){this.props.history.push("/movie/".concat(e.id))}},{key:"render",value:function(){var e=this;return c.a.createElement(ie.a,{onChange:this.downshiftOnChange,itemToString:function(e){return e?e.title:""}},function(t){var n=t.selectedItem,a=t.getInputProps,r=t.getItemProps,o=t.highlightedIndex,i=t.isOpen,u=t.inputValue;return c.a.createElement("div",{className:"search-input-container"},c.a.createElement("input",a({className:"form-control search-input",placeholder:"Search",onChange:e.inputOnChange})),i?c.a.createElement("div",{className:"downshift-dropdown"},e.state.movies.filter(function(e){return!u||e.title.toLowerCase().includes(u.toLowerCase())}).slice(0,10).map(function(e,t){return c.a.createElement("div",Object.assign({key:e.id,className:"dropdown-item"},r({key:t,index:t,item:e}),{style:{backgroundColor:o===t?"lightgray":"white",fontWeight:n===e?"bold":"normal"}}),c.a.createElement("img",{alt:"thumbnail",className:"search-thumbnail",src:e.poster_path}),e.title)})):null)})}}]),t}(r.Component),le={searchMovie:function(e){return function(){var t=Object(Q.a)(G.a.mark(function t(n){return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SEARCH_MOVIE_API_REQUEST"}),t.abrupt("return",H.searchMovies(e).then(function(e){return e.json().then(function(e){return n({type:"SEARCH_MOVIE_API_SUCCESS",data:e})}).catch(function(e){return n(ue(e))})}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},pe=Object(l.e)(Object(u.connect)(null,le)(se)),me=function(e){function t(){return Object(R.a)(this,t),Object(L.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.getTopMovies({page:1})}},{key:"render",value:function(){var e=this.props.movies.topRated,t=e.results?y(e):null;return c.a.createElement("div",{className:"movie-browser"},c.a.createElement(b.ImmutableLoadingBar,null),c.a.createElement(J.a,null,c.a.createElement(B.a,{className:"back-drop"},c.a.createElement("div",{className:"stripes"},c.a.createElement("img",{className:"logo",alt:"logo",src:"/tmdb-logo.png"}))),c.a.createElement(B.a,null,c.a.createElement(pe,null)),c.a.createElement(B.a,null,c.a.createElement(ce,{movies:t}))))}}]),t}(r.Component),he={getTopMovies:function(e){return function(){var t=Object(Q.a)(G.a.mark(function t(n){return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_TOP_MOVIES_API_REQUEST"}),t.abrupt("return",H.getTopMovies(e).then(function(e){e.json().then(function(e){return n({type:"GET_TOP_MOVIES_API_SUCCESS",data:e})}).catch(function(e){return n(Y(e))})}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},de=Object(u.connect)(function(e){return{movies:e.get("movies").toJS(),currentPage:e.getIn(["movies","topRated","currentPage"])}},he)(me),ve=n(56),fe=n.n(ve),be=n(55),Ee=n.n(be),ge=function(e){return{type:"GET_MOVIE_DETAILS_API_FAILURE",error:e}},Oe=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(L.a)(this,Object(U.a)(t).call(this,e))).state={isLoading:!1},n}return Object(D.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.currentMovie.id!==t&&(this.setState({isLoading:!0}),this.props.getMovieDetails({movieId:t}).then(function(){return e.setState({isLoading:!1})}))}},{key:"handleBackClick",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=_(this.props.currentMovie),t=e.title,n=e.backdrop_path,a=e.poster_path,r=e.runtime,o=e.release_date,i=e.overview,u=e.vote_average,s={backgroundImage:"url(".concat(n,")")},l=this.state.isLoading,p=Math.round(10*parseFloat(u));return l?c.a.createElement(Ee.a,{className:"spinner",animation:"border",variant:"light"}):c.a.createElement(fe.a,{className:"movie-details"},c.a.createElement("div",{className:"arrow-back",onClick:this.handleBackClick.bind(this)}),c.a.createElement(z.a,{className:"transition-item"},c.a.createElement("div",{className:"card-banner",style:s}),c.a.createElement(z.a.Body,null,c.a.createElement(X.a,null,c.a.createElement($.a,{xs:5,md:3,lg:2},c.a.createElement("img",{className:"thumbnail",alt:"thumbnail",src:a})),c.a.createElement($.a,{xs:7,md:9,lg:10},c.a.createElement("div",{className:"card-info"},c.a.createElement("h5",null,t),c.a.createElement("p",null,new Date(o).getFullYear()," \xb7 ",p,"% User Score ",c.a.createElement("br",null),function(e){var t=e%60;return"".concat((e-t)/60,"h ").concat(t," min")}(r))))),c.a.createElement("hr",null),c.a.createElement(z.a.Title,null,"Overview"),c.a.createElement(z.a.Text,null,i))))}}]),t}(r.Component),je={getMovieDetails:function(e){return function(){var t=Object(Q.a)(G.a.mark(function t(n){return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_MOVIE_DETAILS_API_REQUEST"}),t.abrupt("return",H.getMovieDetails(e).then(function(e){e.json().then(function(e){return n({type:"GET_MOVIE_DETAILS_API_SUCCESS",data:e})}).catch(function(e){return n(ge(e))})}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},_e=Object(l.e)(Object(u.connect)(function(e){return{currentMovie:e.getIn(["movies","currentMovie"]).toJS()}},je)(Oe)),ye=(n(90),n(91),a={},Object(h.d)(T,v.default.fromJS(a),Object(h.c)(Object(h.a)(d.a,A,P,Object(b.loadingBarMiddleware)({promiseTypeSuffixes:["REQUEST","SUCCESS","FAILURE"]})))));i.a.render(c.a.createElement(u.Provider,{store:ye},c.a.createElement(V,null,c.a.createElement(s.a,null,c.a.createElement(m.a,null,c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:de}),c.a.createElement(l.a,{exact:!0,path:"/movie/:id",component:_e})))))),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.c307ef2d.chunk.js.map